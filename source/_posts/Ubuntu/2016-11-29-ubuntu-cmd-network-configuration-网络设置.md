title: ubuntu-cmd~network-configuration-网络设置
date: 2016-11-29 00:05:05
category: [Ubuntu, Cmd]
tags:
description:
---
[Toc]

## 静态IP地址设置

以树莓派为例：

编辑文件`cat /etc/network/interfaces`
``` bash
pi@raspberrypi:~ $ cat /etc/network/interfaces
# interfaces(5) file used by ifup(8) and ifdown(8)

# Please note that this file is written to be used with dhcpcd
# For static IP, consult /etc/dhcpcd.conf and 'man dhcpcd.conf'

# Include files from /etc/network/interfaces.d:
source-directory /etc/network/interfaces.d

auto lo
iface lo inet loopback

iface eth0 inet manual

allow-hotplug wlan0
iface wlan0 inet manual
    wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf

allow-hotplug wlan1
iface wlan1 inet manual
    wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
```
首先将`/etc/network/interfaces`文件备份`sudo cp interfaces interfaces.backup`

然后编辑文件

* `iface eth0 inet manual`表示

### 配置静态IP地址
设置树莓派IP地址

``` bash
sudo ifconfig eth0 192.168.99.138 netmask 255.255.255.0
sudo route add default gw 192.168.99.1
sudo ifconfig eth0 up
```

编辑`/etc/network/interfaces` 文件

``` bash
iface eth0 inet static
    address 192.168.99.145
    netmask 255.255.255.0
    gatway  192.168.99.1
```
设置静态的IP地址，网关，掩码，网络，广播地址

## DNS配置

树莓派的初始值
``` bash
pi@raspberrypi:/etc/network $ cat /etc/resolv.conf
# Generated by resolvconf
domain lan
nameserver 192.168.99.1
```
* DNS服务请求经由地址`192.168.99.1`的路由器来传送
* 互联网的服务提供商为`lan`

对`resolv.conf`的修改是即时生效的，可以使用`nslookup`命令进行DNS服务器查询，
以验证`resolv.conf`配置文件。 
 
## 重启网卡
``` bash
$ /etc/init.d/networking restart
或者也有
$ sudo service network restart
```
也可以单独重启网卡配置，让其生效，优点是不影响其他网络接口：
``` bash
$ sudo ifdown eth0
$ sudo ifup eth0
```
具体还需要`man dhcpcd.conf`
